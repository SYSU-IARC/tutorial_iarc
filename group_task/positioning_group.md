## 定位组任务  
### 完成这些任务后，你将获得：  
* 使用各类传感器的基础能力。  
* 抵抗和解决各种硬件玄学的经验。  
* 多传感器数据融合的知识。  
* 飞行器建模的知识。  
* 图像处理与识别的知识。  
* 光流算法的知识。  
* 对定位组代码架构的了解。  

### 第四周任务  
#### 对于在校同学  
##### 学习目标  
> 1. 掌握四轴无人机建模  
> 2. 知道四元数与欧拉角以及它们的转换  
> 3. guidance 官方文档  
> 4. 掌握使用一款传感器的SDK的能力  

##### 学习内容  
> 1. 阅读[quadrotor dynamics and control 论文](http://scholarsarchive.byu.edu/cgi/viewcontent.cgi?article=2324&context=facpub&sei-redir=1&referer=http%3A%2F%2Fcn.bing.com%2Fsearch%3Fq%3Dquadrotor%2Bdynamics%2Band%2Bcontrol%26qs%3DAS%26pq%3Dquadrotor%2Bdynamics%2Band%2Bc%26sc%3D2-24%26cvid%3D87AAD3B1893942708BA5918528A944E3%26FORM%3DQBRE%26sp%3D1#search=%22quadrotor%20dynamics%20control%22)第一章
。  
> 2. 自行搜索资料了解四元数与欧拉角（欧拉角相关内容在上面的论文中已经包含）。  
> 3. 阅读guidance 官方文档  
> 4. 阅读guidance 示例代码  

##### project  
> 编写一个guidance类，包含以下函数接口  
> > 1. init() // 初始化，订阅相关数据  
> > 2. getAttitude() // 获得姿态角（欧拉角）  
> > 3. getHeight() //获得高度  
> > PS: guidance直接获得的是四元数，需要你把它转化成欧拉角。guidance通过朝下的超声波传感器获得距离，但是在无人机有一定倾斜角度的时候，这个距离就不是高度了，你需要一点无人机建模的知识，才能把距离转化成高度。  

#### 对于在家的同学  
##### 学习目标  
> 1. I2C通信与串口通信协议  
> 2. 串口库的使用  
> 3. mpu6050 官方文档  
> 4. 单片机(arduino)基础编程  
> PS：你需要自己采购一些材料来完成这周的任务，请提前准备，总花费大概50左右  

##### 学习内容  
> 1. 学习如何通过I2C协议与mpu6050通信  
> 2. 学习如何使用串口协议与电脑通信  
> 3. 学习在PC端通过串口助手读取串口数据  

##### project  
> 制作一个获取IMU数据的模块，要实现以下功能  
> > 1. 用单片机(arduino)读取mpu6050输出的四元数与加速度  
> > 2. 将获得的数据附上时间戳以一定格式通过串口输出  
> > 3. 在PC端用串口精灵读到数据
  
> PS:   
1. 这个项目中单片机只是做数据转发的工作，没有运算能力的要求，推荐使用arduino，会简单很多。  
2. 关于mpu6050有很多现成的代码，你可以参照部分，但是希望你一定要掌握I2C通信以及串口通信的部分。  


### 第五周任务  
#### 对于在校同学  
##### 学习目标  
> 1. 掌握M100 onboard SDK的使用  
> 2. 基本的无人机控制  

##### 学习内容  
> 1. 自行学习PID控制相关内容
> 2. 阅读onboard SDK[官方文档](http://developer.dji.com/onboard-sdk/documentation/quick-start/index.html)  
> 3. 阅读onboard SDK 示例代码  

##### project  
> 编写一个使用 onbard SDK 控制无人机飞行的程序，要求：  
> > 1. 通过命令行接收指令  
> > 2. 实现水平位置控制(从命令行输入世界坐标后无人机飞到指定坐标)  
> > 3. 实现高度控制(从命令行输入高度)  
> > 4. 实现起飞和降落的控制
> > PS: 起飞降落以及高度控制其实onboardSDK都有相关函数可以调用，但是水平控制只能使用onboardSDK提供的水平速度控制相关的功能，并且通过自己写PID环控制水平位置。
> > (事实上onboardSDK也自带水平位置控制的函数，但输入的是偏移量，灵活性不够，所以这里使用它的速度控制功能加上自己的PID环来实现水平位置控制)

#### 对于在家的同学  
##### 学习目标  
> 1. 写程序读取串口数据    
> 2. 卡尔曼滤波(多传感器数据融合)  

##### 学习内容  
> 1. 阅读[libserial文档](https://github.com/crayzeewulf/libserial)   
> 2. 学习如何使用串口库读取串口传感器的数据  
> 3. 卡尔曼滤波  
> > 卡尔曼滤波推荐资料：  
> > [《Probabilistic Robotics》](http://www.probabilistic-robotics.org/)    
> > 《多传感器最优估计理论及其应用》  
> > [How a Kalman filter works, in pictures](http://www.bzarg.com/p/how-a-kalman-filter-works-in-pictures/)  

##### project  
> 读取你上个星期制作好的传感器数据，并通过那些数据来获得姿态角(欧拉角)  
> > 1. 使用串口库读取到数据  
> > 2. 通过加速度数据计算出姿态(因为重力加速度一直朝下，在传感器模块不动的情况下，可以根据重力加速的在传感器各个轴上的分量来计算传感器的姿态)  
> > 3. 通过角速度积分计算出姿态   
> > 4. 通过卡尔曼滤波融合加速度数据和角速度数据得到更精确的姿态数据  
> PS:直接通过加速度计算姿态会收到很多因为模块运动带来的干扰，而通过角速度积分会有较大的积分误差，卡尔曼滤波可以弥补这个缺陷。其实网上有很多现成的代码来通过加速度计和陀螺仪计算姿态，你可以参考，搜索关键词“无人机姿态解算”。  
  
### 第六周任务  
##### 学习目标  
> 1. 基本opencv  
> 2. 图像滤波  
> 3. 直线识别  

##### 学习内容  
> 1. 自行学习opencv基础内容(前3周任务中已有相关内容)  
> 2. 学习图像滤波算法原理及应用场合，包括高斯滤波，方框滤波，中值滤波，腐蚀，膨胀，开运算，闭运算  
> 3. canny算法  
> 3. 霍夫变换  
> 推荐书籍：《opencv3编程入门》  

##### project  
> 编写程序识别赛场上的直线  
> > 1. 使用videocapture读取视频内容  
> > 2. 对图像进行一定的预处理（滤波等）  
> > 3. 识别图像中的白线  
> > 4. 计算白线的交点  
> > PS: 要求识别出图像中的所有白线，不能丢线，同一条线不能识别成多条。  

### 第七周任务  
##### 学习目标  
> 1. 了解各种光流算法
> 2. 能够自己编写SAD光流的代码

##### 学习内容  
> 1. 阅读各种光流算法的资料（[维基百科](https://en.wikipedia.org/wiki/Optical_flow#Methods_for_determination))  
> 2. 深入了解SAD光流算法
> 3. 阅读[pxflow开源的光流算法](https://github.com/PX4/Flow)  

##### project  
> 利用自己笔记本的摄像头读取图像并用SAD光流算法计算像素位移   
> > 1. 使用videocapture读取笔记本摄像头数据  
> > 2. 对图像进行一定的预处理  
> > 3. 参照px4flow的代码进行光流计算  
> > 4. 输出视频的平均像素位移  
